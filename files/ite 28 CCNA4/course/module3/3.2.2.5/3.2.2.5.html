<!DOCTYPE html>
<html class="loading" dir="ltr" lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title>3.2.2.5 PPPoE Authentication</title>
    <!-- Content -->
    <link rel="stylesheet" type="text/css" href="../../common-ext/styles/page.css"/>
    <script type="text/javascript" src="../../common-ext/scripts/jquery-2.1.0.min.js"></script>
    <script type="text/javascript" src="../../common-ext/scripts/permission.js"></script>
    <script type="text/javascript" src="../../common-ext/scripts/page.js"></script>
    <script type="text/javascript" src="media/override.js"></script>
    <script>
      var media_transcript_file = "media_3.2.2.5_longdesc.txt";
    </script>
  </head>
  <body>
    <div id="text-container" role="main">
      <div id="text">
        <h1>PPPoE Authentication</h1>
        <div>
          <p>After confirming with the ISP that they use CHAP, verify that the CHAP username and password are correct. Figure 1 shows the CHAP configuration on the dialer2 interface.</p>
          <p></p>
          <p>Re-examining the output of the <b>debug ppp negotiation</b> command in Figure 2, verifies that the CHAP username is correct.</p>
          <p></p>
          <p>If the CHAP username or password were incorrect, the output from the <b>debug ppp negotiation</b> command would show an authentication failure message such as shown in Figure 3.</p>
        </div>
      </div>
      <div id="text-handle" title="Resize" role="button"></div>
    </div>
    <div id="media-container" role="complementary">
      <iframe id="media" title="interactive graphic" aria-label="interactive graphic" aria-describedby="media-description"></iframe>
      <div id="media-description">Figure 1 shows to verify the CHAP configuration. On the left is a LAN connected to the R1 customer router labeled G0/0. Coming out of the right of R1 via G0/1 is a cable that goes to a modem. G0/1 is labeled .1 and the modem is labeled 10.1.3.0/24. The modem connects to another modem located inside the ISP cloud. The ISP modem connects to router R2 via interface G0/1 that is labeled .2. R2 is also inside the ISP cloud. The following output is shown: R1# show running-config | section interface dialer2, interface dialer2, mtu 1492, ip address negotiated, encapsulation ppp, dialer pool 1, ppp authentication chap callin, (the next two lines are highlighted), ppp chap hostname Fred, ppp chap password 0 Barney, R1#. Figure 2 is the same topology as figure 1 and shows how to verify the CHAP username. The following output is shown: R1: debug ppp negotiation, *Sep 20 19:05:05.239: Vi2 PPP: Phase is AUTHENTICATING, by the peer, *Sep 20 19:05:05:05.239: Vi2 LCP: state is open, <output omitted>, *Sep 20 19:05:05.247: Vi2 (rest of line is highlighted) CHAP: using hostname from interface CHAP, *Sep 20 19:05:05.247: Vi2 (rest of line is highlighted) CHAP: using hostname from interface CHAP, *Sep 20 19:05:05.247: Vi2 (rest of line is highlighted) CHAP: 0 response id 1 len 26 from “Fred”, *Sep 20 19:05:05.255: Vi2 CHAP: I SUCCESS id 1 len 4, (rest of the line is highlighted), *Sep 20 19:05:05.259: Vi2 IPCP: address 10.1.3.2 (0x0306a010302), *Sep 20 19:05:05.259: Vi2 IPCP: event [receive confack] state[acksent to open], *Sep 20 19:05:05.271: Vi2: IPCP: State is open. *Sep 20 19:05:05.271: Di2 IPCP: Install negotiated IP interface address 10.1.3.2. *Sep 20 19:05:05.271: Di2 Added to neighbor route AVL tree: topoid 0, address 10.1.3.2. *Sep 20 19:05:05.271: Di2 IPCP: Install route to 10.1.3.2. R1# undebug all. Figure 3 is the same topology as figures 1 and 2 and shows the authentication failure message with the following command output: R1#, #Sep 20 19:05:05.247: Vi2 CHAP: I FAILURE id 1 len 26 MSG is “Authentication failure”, R1#.</div>
    </div>
    <div id="login">Please log into <a href="http://netacad.com">netacad.com</a> before accessing this course.</div>
  </body>
</html>
